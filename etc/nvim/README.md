# Jason's Janky nvim Config

## Shortcuts

These aren't all necessarily custom... more of an aide-memoire for me...

  - `<F2>` - rename (VSCode muscle memory...)
  - `<F12>` - goto definition (ditto...)
  - `=` - LSP reformat
  - `<C-l>` - redraw the screen, clear search

### Autocompletion/LSP stuff

  - `<C-Enter>` - LSP code actions
  - `<C-Space>` - summon autocompleter
  - `<C-{n,p}>` - next/previous autocompletion

### Buffer navigation

  - `<leader><leader>` - Telescope buffer switcher
  - `<leader><BS>` - Alternate buffer
  - `<leader>[` - Previous buffer
  - `<leader>]` - Next buffer
  - `<leader>b` - General buffer leader

### i3 Integration

  - `<M-Enter>` - pop up a terminal, working dir = workspace root
  - `<M-S-Enter>` - pop up a terminal, working dir = active file dir
  - `<leader>gg` - pop up `lazygit`

## Editing

  - (I) `<C-BS>` - delete word
  - (N/I) - `<M-S-{Up,Down}>` - move line up/down

## Windows

Window numbering is derived on-demand based on geometry, increasing from left to right.

  - `<M-0>` - focus on Neotree, open if not visible
  - `<M-S-0>` - toggle Neotree
  - `<M-{1-4}>` - jump to window 1-4
  - `<M-S-{1-4}>` - move active buffer to window 1-4
  - `<M-{Left,Right}>` - cycle active window left/right (with wraparound)
  - `<M-=>` - equalize width of all windows
  - `<M-S-=>` - focus on active window (make it 70% of the available horizontal space)

In Neotree, pressing `{1-4}` will open file in the corresponding window (assumes target window exists).

---

## TODO

### Typescript

  - [x] need to auto-add imports like in VSCode
    - done via code actions. doesn't always work in my test suites?

### LSP Floats

Using `K` to trigger hover. It would be better if pressing it again closed the popup, rather than focus.
Look into the default LSP bindings; maybe remove the `K` binding and make our own function (should be an autocmd for LspAttach).

We should setup `T` to trigger/toggle a popup for the "best possible" guess at the __type definition__ under consideration.

Investigate `lspsaga` plugin.

### Misc

  - [ ] Can autocomplete add argument placeholders?
  - [ ] LLM integration
  - [ ] Paste with auto format/indent
  - [ ] Block comments - gc, gcc - but trying to get C-/ working to do it too
  - [x] Full system clipboard integration
  - [x] Block indents
  - [x] `<C-l>` should trigger `:noh`
  - [x] Golang should have automatic imports, like in VSCode
    - code actions handling this
  - [x] Review how I'm doing auto-formatting on save, right now it's just LSP but probably better to shell out to a proper tool for configurabillity?
    - have got a local autocmd for this; just use LSP if available
    - need to support external formatters on a per-project basis; wonder if there's something for this?

### `shunt`

`shunt` plugin maintains a single floating window.
stuff can be pushed into that window:

  - type definitions
  - selected text
  - anything else...?

The contents of the `shunt` window buffer are generated by a script as things are added to the `shunt`. There is also the option to "kill" items by index, or clear the buffer entirely. Also - options to show/hide the window.

Look into the `nui` plugin - might be a good starting point for building the UI.

### Build system integration

Simplest way to do this is to lean on `make` and some predefined targets:

  - `make`
  - `make test`
  - `make debug`
  - `make run`

HOWEVER it would be good if we could get build feedback with clickable errors.
What about setting up breakpoints?
And it would be good if `make run` could run in a foreground terminal.

So it's not quite as simple as just "calling make".

Also - .env support

Once we've got something in place for this we can just assign `F5` - `F8` to these functions. Or maybe `<leader>p` for project or `<leader>m` for `make`.

### Plugins

  - nvim-treesitter-textobjects
  - nvim-surround
  - snipe ?
  - easymotion ?
  - harpoon ?

### Navigation

  - Ideally prev/next buffer (`<leader>[, <leader>]`) would be window specific.

### Window Stuff

  - Ability to cycle Neotree through files/docsyms/git/buffers
    (or maybe distinct command for each?)
  - Attempting to open file from Neotree into non-existent window should cause creation of a new split.

