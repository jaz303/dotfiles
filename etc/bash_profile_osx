# Use TextMate as graphical editor
export GUI_EDITOR="mate -nw"

# Fix font smoothing
function osx_fix_fonts() {
    defaults -currentHost write -globalDomain AppleFontSmoothing -int 3
}

# Copy public key to clipboard
function copy_pubkey {
    cat ~/.ssh/id_rsa.pub | pbcopy
}

# Init env for compiling/running CUDA
function init_cuda {
    export PATH=/Developer/NVIDIA/CUDA-5.0/bin:$PATH
    export DYLD_LIBRARY_PATH=/Developer/NVIDIA/CUDA-5.0/lib:$DYLD_LIBRARY_PATH
}

# Nice man pages
function pman() {
    man -t $* | ps2pdf - - | open -g -f -a /Applications/Preview.app
}

function tman() {
    MANWIDTH=80 MANPAGER='col -bx' man $@ | mate
}

# Open current dir's project in Xcode
function xcode {
    open *.xcodeproj
}

# Send files to trashcan
function trash {
    for f in "$@"
    do
        osascript -e "tell app \"Finder\" to delete POSIX file \"${PWD}/$b\"" 1>/dev/null
    done
}

# Install TextMate module
function textmate_install_bundle {
    pushd ~/.dotfiles
    git submodule add https://github.com/textmate/$1.tmbundle TextMate/Bundles/$1.tmbundle
    popd
}

# Make reduced versions of all retina graphics in the current dir
function retina_reduce {
    for i in *@2x*; do convert $i -geometry 50% $(echo $i | sed 's/@2x//'); done
}
